<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hawking Astronomy Club - VTU</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Combined CSS for all components */
        .menu-button {
        background: none;
        border: none;
        color: white;
        font-size: 1.8rem;
        cursor: pointer;
        margin-right: 20px;
        transition: all 0.3s;
        outline: none; /* Remove focus outline */
    }

    /* Updated Auth Buttons */
    .auth-buttons {
        display: flex;
        gap: 15px;
    }

    .auth-buttons a {
        background: linear-gradient(135deg, rgba(26, 35, 126, 0.9) 0%, rgba(74, 20, 140, 0.9) 100%);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
        font-family: 'Orbitron', sans-serif;
        text-decoration: none;
        font-size: 1rem;
        border: 1px solid #4fc3f7;
        box-shadow: 0 0 15px rgba(79, 195, 247, 0.3);
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .auth-buttons a:hover {
        background: linear-gradient(135deg, rgba(48, 63, 159, 0.9) 0%, rgba(123, 31, 162, 0.9) 100%);
        box-shadow: 0 0 25px rgba(79, 195, 247, 0.6);
        transform: translateY(-3px);
    }

    /* Centered Action Buttons */
    .action-buttons {
        display: flex;
        gap: 25px;
        margin-bottom: 40px;
        justify-content: center;
        width: 100%;
    }

    /* Profile Dropdown Improvements */
    .profile-dropdown {
        display: none;
        position: absolute;
        right: 0;
        top: 50px;
        background: rgba(18, 18, 42, 0.95);
        border-radius: 8px;
        padding: 20px;
        min-width: 250px;
        z-index: 100;
        border: 1px solid rgba(79, 195, 247, 0.3);
        box-shadow: 0 0 30px rgba(31, 38, 135, 0.3);
    }

    .profile-dropdown span {
        display: block;
        color: #4fc3f7;
        margin-bottom: 15px;
        font-weight: 600;
        font-size: 1.1rem;
    }

    .profile-dropdown p {
        color: #b3e5fc;
        margin-bottom: 15px;
        font-family: 'Space Mono', monospace;
        font-size: 0.9rem;
    }

    .profile-dropdown a {
        color: white;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 0;
        transition: all 0.3s;
    }

    .profile-dropdown a:hover {
        color: #4fc3f7;
        padding-left: 5px;
    }

    .profile-dropdown::before {
        content: '';
        position: absolute;
        top: -10px;
        right: 15px;
        border-width: 0 10px 10px 10px;
        border-style: solid;
        border-color: transparent transparent rgba(18, 18, 42, 0.95) transparent;
    }
        :root {
            --primary: #6a11cb;
            --secondary: #2575fc;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --error: #dc3545;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
        }

        /* Auth Page Styles */
        .auth-page {
            background: linear-gradient(135deg, var(--dark), #16213e);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--light);
            padding: 20px;
        }

        .auth-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 40px;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-logo h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.2rem;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary);
            background: rgba(255, 255, 255, 0.15);
        }

        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .btn-primary {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.4);
        }

        .auth-footer {
            text-align: center;
            margin-top: 25px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        .auth-footer a {
            color: var(--secondary);
            text-decoration: none;
            font-weight: 600;
        }

        .auth-footer a:hover {
            text-decoration: underline;
        }

        .error-message {
            color: var(--error);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        /* Main Page Styles */
        .main-page {
            display: none;
        }

        body.main-body {
            background-color: #0a0a1a;
            color: #ffffff;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(41, 98, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(198, 51, 255, 0.1) 0%, transparent 20%),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="20" cy="20" r="0.5" fill="white" opacity="0.7"/><circle cx="50" cy="50" r="0.5" fill="white" opacity="0.7"/><circle cx="80" cy="30" r="0.5" fill="white" opacity="0.7"/><circle cx="30" cy="70" r="0.5" fill="white" opacity="0.7"/><circle cx="70" cy="80" r="0.5" fill="white" opacity="0.7"/></svg>');
            background-attachment: fixed;
            font-family: 'Orbitron', 'Arial', sans-serif;
        }

        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap');

        /* Scrolling Announcement */
        .announcement-bar {
            background: linear-gradient(90deg, #1a237e 0%, #311b92 50%, #1a237e 100%);
            color: #ffffff;
            padding: 12px 0;
            overflow: hidden;
            white-space: nowrap;
            position: relative;
            border-bottom: 1px solid #4a148c;
            box-shadow: 0 2px 10px rgba(74, 20, 140, 0.5);
        }

        .announcement-content {
            display: inline-block;
            padding-left: 100%;
            animation: scroll 25s linear infinite;
            text-shadow: 0 0 5px rgba(79, 195, 247, 0.7);
            font-family: 'Space Mono', monospace;
        }

        .announcement-content i {
            margin: 0 10px;
            color: #4fc3f7;
        }

        @keyframes scroll {
            from { transform: translateX(0); }
            to { transform: translateX(-100%); }
        }

        /* Header Styles */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 5%;
            background-color: rgba(10, 10, 26, 0.9);
            border-bottom: 1px solid #1a237e;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(5px);
        }

        .logo-container {
            display: flex;
            align-items: center;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .hac-logo {
            height: 80px;
            margin-right: 20px;
            filter: drop-shadow(0 0 5px rgba(79, 195, 247, 0.7));
        }

        .vtu-logo {
            height: 40px;
            margin-right: 15px;
            filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.5));
        }

        .club-name h1 {
            font-size: 2.2rem;
            color: #4fc3f7;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
            letter-spacing: 1px;
        }

        .club-name p {
            font-size: 1rem;
            color: #b3e5fc;
            font-family: 'Space Mono', monospace;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Dropdown Menu */
        .dropdown-menu {
            display: none;
            position: absolute;
            left: 5%;
            top: 100%;
            background: rgba(26, 35, 126, 0.95);
            min-width: 250px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(10px);
            z-index: 1;
            border-radius: 10px;
            border: 1px solid rgba(79, 195, 247, 0.3);
            overflow: hidden;
            animation: fadeIn 0.3s ease-out;
        }

        .dropdown-menu a {
            color: #e0e0e0;
            padding: 12px 20px;
            text-decoration: none;
            display: block;
            font-family: 'Space Mono', monospace;
            transition: all 0.3s;
            border-bottom: 1px solid rgba(79, 195, 247, 0.1);
        }

        .dropdown-menu a i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .dropdown-menu a:hover {
            background: rgba(79, 195, 247, 0.2);
            color: #4fc3f7;
            padding-left: 25px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .menu-button {
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            margin-right: 20px;
            transition: all 0.3s;
        }

        .menu-button:hover {
            color: #4fc3f7;
            transform: rotate(90deg);
        }

        /* Main Content */
        .main-content {
            padding: 40px 5%;
            min-height: 60vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .welcome-section {
            text-align: center;
            margin-bottom: 40px;
            max-width: 800px;
        }

        .welcome-section h2 {
            color: #4fc3f7;
            font-size: 2.2rem;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
        }

        .action-buttons {
            display: flex;
            gap: 25px;
            margin-bottom: 40px;
            justify-content: center;
            width: 100%;
        }

        .apod-section {
            width: 100%;
            max-width: 1000px;
            text-align: center;
        }

        .apod-title {
            color: #4fc3f7;
            margin-bottom: 20px;
            font-size: 1.7rem;
            text-shadow: 0 0 5px rgba(79, 195, 247, 0.5);
        }

        .apod-container {
            display: flex;
            background: rgba(18, 18, 42, 0.7);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid rgba(79, 195, 247, 0.2);
            box-shadow: 0 0 30px rgba(31, 38, 135, 0.2);
        }

        .apod-image-box {
            flex: 1;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.3);
        }

        .apod-image {
            max-width: 100%;
            max-height: 400px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(79, 195, 247, 0.3);
        }

        .apod-info-box {
            flex: 1;
            padding: 20px;
            text-align: left;
        }

        .apod-date {
            color: #b3e5fc;
            font-size: 0.9rem;
            margin-bottom: 15px;
            font-family: 'Space Mono', monospace;
            display: flex;
            align-items: center;
        }

        .apod-date i {
            margin-right: 8px;
            color: #4fc3f7;
        }

        .apod-explanation {
            color: #e0e0e0;
            line-height: 1.6;
            font-family: 'Space Mono', monospace;
            font-size: 0.95rem;
        }

        /* Footer Styles */
        footer {
            background: rgba(10, 10, 26, 0.9);
            padding: 40px 5% 20px;
            border-top: 1px solid #1a237e;
            position: relative;
            backdrop-filter: blur(5px);
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .footer-section {
            flex: 1;
            min-width: 250px;
            margin-bottom: 30px;
            padding: 0 20px;
        }

        .footer-section h3 {
            color: #4fc3f7;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .footer-section p, .footer-section a {
            color: #b3e5fc;
            margin-bottom: 12px;
            display: block;
            text-decoration: none;
            transition: all 0.3s;
            font-family: 'Space Mono', monospace;
            line-height: 1.5;
        }

        .footer-section a:hover {
            color: #4fc3f7;
            padding-left: 5px;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(79, 195, 247, 0.2);
            margin-top: 20px;
            color: #b3e5fc;
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
        }

        /* Button Styles */
        button {
            background: linear-gradient(135deg, rgba(26, 35, 126, 0.8) 0%, rgba(74, 20, 140, 0.8) 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
            border: 1px solid #4fc3f7;
            box-shadow: 0 0 15px rgba(79, 195, 247, 0.3);
        }

        button:hover {
            background: linear-gradient(135deg, rgba(48, 63, 159, 0.9) 0%, rgba(123, 31, 162, 0.9) 100%);
            box-shadow: 0 0 25px rgba(79, 195, 247, 0.6);
            transform: translateY(-3px);
        }

        /* User Auth Section */
        .user-auth-section {
            display: flex;
            align-items: center;
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
        }

        .auth-buttons a {
            background: linear-gradient(135deg, rgba(26, 35, 126, 0.9) 0%, rgba(74, 20, 140, 0.9) 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Orbitron', sans-serif;
            text-decoration: none;
            font-size: 1rem;
            border: 1px solid #4fc3f7;
            box-shadow: 0 0 15px rgba(79, 195, 247, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .auth-buttons a:hover {
            background: linear-gradient(135deg, rgba(48, 63, 159, 0.9) 0%, rgba(123, 31, 162, 0.9) 100%);
            box-shadow: 0 0 25px rgba(79, 195, 247, 0.6);
            transform: translateY(-3px);
        }

        .user-profile {
            position: relative;
            cursor: pointer;
        }

        .profile-img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #4fc3f7;
            transition: all 0.3s;
        }

        .profile-img:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(79, 195, 247, 0.6);
        }

        .profile-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: 50px;
            background: rgba(18, 18, 42, 0.95);
            border-radius: 8px;
            padding: 20px;
            min-width: 250px;
            z-index: 100;
            border: 1px solid rgba(79, 195, 247, 0.3);
            box-shadow: 0 0 30px rgba(31, 38, 135, 0.3);
        }

        .profile-dropdown span {
            display: block;
            color: #4fc3f7;
            margin-bottom: 15px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .profile-dropdown p {
            color: #b3e5fc;
            margin-bottom: 15px;
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
        }

        .profile-dropdown a {
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            transition: all 0.3s;
        }

        .profile-dropdown a:hover {
            color: #4fc3f7;
            padding-left: 5px;
        }

        .profile-dropdown::before {
            content: '';
            position: absolute;
            top: -10px;
            right: 15px;
            border-width: 0 10px 10px 10px;
            border-style: solid;
            border-color: transparent transparent rgba(18, 18, 42, 0.95) transparent;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .logo-container {
                position: static;
                transform: none;
                order: 2;
                width: 100%;
                justify-content: center;
                margin: 15px 0;
            }
            
            .apod-container {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .club-name h1 {
                font-size: 1.5rem;
            }
            
            .club-name p {
                flex-direction: column;
            }
            
            .vtu-logo {
                margin-right: 0;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body id="bodyElement">
    <!-- Auth Page (hidden by default) -->
    <div id="auth-page" class="auth-page" style="display: none;">
        <div class="auth-container">
            <div class="auth-logo">
                <h1>Hawking Astronomy Club</h1>
                <p id="auth-message">Welcome back, stargazer!</p>
            </div>
            
            <div class="form-group">
                <label for="auth-email">Email</label>
                <input type="email" id="auth-email" class="form-control" placeholder="your@email.com" required>
                <div class="error-message" id="email-error"></div>
            </div>
            
            <div class="form-group">
                <label for="auth-password">Password</label>
                <input type="password" id="auth-password" class="form-control" placeholder="••••••••" required>
                <div class="error-message" id="password-error"></div>
            </div>
            
            <button class="btn btn-primary" id="auth-action-btn">Sign In</button>
            
            <div class="auth-footer" id="auth-footer">
                Don't have an account? <a href="#" id="toggle-auth">Sign up here</a><br>
                <a href="#" id="reset-password">Forgot password?</a>
            </div>
        </div>
    </div>

    <!-- Main Page (shown by default) -->
    <div id="main-page" class="main-page" style="display: block;">
        <!-- Scrolling Announcement -->
        <div class="announcement-bar">
            <div class="announcement-content">
                <i class="fas fa-telescope"></i> Next Club Meeting: Friday at 4 PM in Science Block Room 203 | <i class="fas fa-moon"></i> Telescope Observation Night: Saturday at 7 PM | <i class="fas fa-camera"></i> Astro-Photography Workshop: Next Week! | <i class="fas fa-star"></i> Special Guest Lecture: Dr. Sharma on Exoplanets - Jan 25th
            </div>
        </div>
        
        <!-- Header -->
        <header>
            <button class="menu-button" id="menuBtn" title="Menu">
                <i class="fas fa-bars"></i>
            </button>
            <div class="dropdown-menu" id="dropdownMenu">
                <a href="#"><i class="fas fa-info-circle"></i> About the Club</a>
                <a href="#"><i class="fas fa-users"></i> Team Members</a>
                <a href="#"><i class="fas fa-question-circle"></i> Why Join Us?</a>
                <a href="#"><i class="fas fa-calendar-alt"></i> Upcoming Events</a>
                <a href="#"><i class="fas fa-images"></i> Photo Gallery</a>
                <a href="#"><i class="fas fa-book"></i> Resources</a>
                <a href="#"><i class="fas fa-envelope"></i> Contact</a>
            </div>
            
            <div class="logo-container">
                <img src="HAWKING ASTRONOMY CLUB.png" alt="HAC Logo" class="hac-logo">
                <div class="club-name">
                    <h1>Hawking Astronomy Club</h1>
                    <p>
                        <img src="vtu.png" alt="VTU Logo" class="vtu-logo">
                        Visvesvaraya Technological University
                    </p>
                </div>
            </div>
            
            <div class="user-auth-section" id="userAuthSection">
                <div class="auth-buttons">
                    <a href="#" onclick="showAuthForm('login')"><i class="fas fa-sign-in-alt"></i> Sign In</a>
                    <a href="#" onclick="showAuthForm('signup')"><i class="fas fa-user-plus"></i> Sign Up</a>
                </div>
            </div>
        </header>
        
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="welcome-section">
                <h2>Exploring the Universe Together</h2>
                <div class="action-buttons">
                    <button id="eventsBtn"><i class="fas fa-calendar-check"></i> Events</button>
                    <button id="galleryBtn"><i class="fas fa-images"></i> Gallery</button>
                </div>
            </div>
            
            <div class="apod-section">
                <h3 class="apod-title"><i class="fas fa-star"></i> NASA Astronomy Picture of the Day</h3>
                <div class="apod-container">
                    <div class="apod-image-box">
                        <img src="https://apod.nasa.gov/apod/image/2401/NGC1055-SHO-Jeff-Hermann-2048.jpg" alt="NASA APOD" class="apod-image" id="apodImage">
                    </div>
                    <div class="apod-info-box">
                        <p class="apod-date"><i class="fas fa-clock"></i> January 15, 2024</p>
                        <p class="apod-explanation" id="apodExplanation">
                            This image captures the majestic spiral galaxy NGC 1055 in stunning detail. Located about 60 million light-years away in the constellation Cetus, this edge-on galaxy reveals intricate dust lanes and star-forming regions. The image was created using data from the Hubble Space Telescope and showcases the galaxy's extended disk, distorted by gravitational interactions with its neighbor, the famous Messier 77 galaxy.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- FOOTER -->
        <footer>
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About HAC</h3>
                    <p>The Hawking Astronomy Club at VTU is dedicated to exploring the wonders of the universe through observation, education, and community engagement.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <a href="#"><i class="fas fa-chevron-right"></i> Upcoming Events</a>
                    <a href="#"><i class="fas fa-chevron-right"></i> Photo Gallery</a>
                    <a href="#"><i class="fas fa-chevron-right"></i> Resources</a>
                    <a href="#"><i class="fas fa-chevron-right"></i> Join the Club</a>
                </div>
                
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <a href="mailto:hac@vtu.edu.in"><i class="fas fa-envelope"></i> hac@vtu.edu.in</a>
                    <a href="tel:+919876543210"><i class="fas fa-phone"></i> +91 9876543210</a>
                    <p><i class="fas fa-map-marker-alt"></i> Science Block, Room 205</p>
                    <p><i class="fas fa-university"></i> Visvesvaraya Technological University</p>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2024 Hawking Astronomy Club, VTU. All Rights Reserved.</p>
            </div>
        </footer>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBn2e4_TbwbTjVgc7PvOfv2qFFYXsLsoyM",
            authDomain: "hawking-astronomy-club.firebaseapp.com",
            projectId: "hawking-astronomy-club"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        
        // DOM Elements
        const bodyElement = document.getElementById('bodyElement');
        const authPage = document.getElementById('auth-page');
        const mainPage = document.getElementById('main-page');
        const authEmail = document.getElementById('auth-email');
        const authPassword = document.getElementById('auth-password');
        const authActionBtn = document.getElementById('auth-action-btn');
        const authMessage = document.getElementById('auth-message');
        const authFooter = document.getElementById('auth-footer');
        const toggleAuth = document.getElementById('toggle-auth');
        const resetPassword = document.getElementById('reset-password');
        const emailError = document.getElementById('email-error');
        const passwordError = document.getElementById('password-error');
        const userAuthSection = document.getElementById('userAuthSection');
        
        // Auth State
        let isLoginMode = true;
        
        // Initialize UI to show main page first
        showMainPage(null); // Pass null when no user is logged in
        
        // Set up auth state listener
        firebase.auth().onAuthStateChanged((user) => {
            if (user) {
                showMainPage(user);
            } else {
                // Update UI for logged out state
                userAuthSection.innerHTML = `
                    <div class="auth-buttons">
                        <a href="#" onclick="showAuthForm('login')"><i class="fas fa-sign-in-alt"></i> Sign In</a>
                        <a href="#" onclick="showAuthForm('signup')"><i class="fas fa-user-plus"></i> Sign Up</a>
                    </div>
                `;
            }
        });
        
        // Show auth form
        function showAuthForm(mode) {
            isLoginMode = (mode === 'login');
            authPage.style.display = 'flex';
            mainPage.style.display = 'none';
            updateAuthUI();
        }
        
        // Show main page
        function showMainPage(user) {
            authPage.style.display = 'none';
            mainPage.style.display = 'block';
            bodyElement.className = 'main-body';
            
            if (user) {
                // Set up user profile with actual photo if available
                let profileImageUrl = user.photoURL || `https://www.gravatar.com/avatar/${CryptoJS.MD5(user.email.trim().toLowerCase()).toString()}?d=retro`;
                
                userAuthSection.innerHTML = `
                    <div class="user-profile" id="userProfile">
                        <img src="${profileImageUrl}" class="profile-img">
                        <div class="profile-dropdown" id="profileDropdown">
                            <span><i class="fas fa-user-astronaut"></i> ${user.displayName || user.email.split('@')[0]}</span>
                            <p><i class="fas fa-envelope"></i> ${user.email}</p>
                            <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                        </div>
                    </div>
                `;
                
                // Add click event for profile dropdown
                document.getElementById('userProfile').addEventListener('click', function(e) {
                    e.stopPropagation();
                    const dropdown = document.getElementById('profileDropdown');
                    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
                });
            } else {
                // Show auth buttons when no user is logged in
                userAuthSection.innerHTML = `
                    <div class="auth-buttons">
                        <a href="#" onclick="showAuthForm('login')"><i class="fas fa-sign-in-alt"></i> Sign In</a>
                        <a href="#" onclick="showAuthForm('signup')"><i class="fas fa-user-plus"></i> Sign Up</a>
                    </div>
                `;
            }
            
            // Set up menu toggle
            document.getElementById('menuBtn').addEventListener('click', function() {
                const menu = document.getElementById('dropdownMenu');
                menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
            });
            
            // Close menus when clicking outside
            window.addEventListener('click', function(event) {
                if (!event.target.matches('.menu-button') && !event.target.matches('.menu-button *')) {
                    const menu = document.getElementById('dropdownMenu');
                    if (menu.style.display === 'block') {
                        menu.style.display = 'none';
                    }
                }
                
                if (!event.target.matches('.user-profile') && !event.target.matches('.user-profile *')) {
                    const dropdown = document.getElementById('profileDropdown');
                    if (dropdown && dropdown.style.display === 'block') {
                        dropdown.style.display = 'none';
                    }
                }
            });
            
            // Button event handlers
            document.getElementById('eventsBtn').addEventListener('click', function() {
                alert('Events page will be shown here!');
            });
            
            document.getElementById('galleryBtn').addEventListener('click', function() {
                alert('Gallery page will be shown here!');
            });
            
            // Pause announcement on hover
            const announcement = document.querySelector('.announcement-content');
            announcement.addEventListener('mouseenter', function() {
                this.style.animationPlayState = 'paused';
            });
            
            announcement.addEventListener('mouseleave', function() {
                this.style.animationPlayState = 'running';
            });
        }
        
        // Update auth UI based on mode (login/signup)
        function updateAuthUI() {
            if (isLoginMode) {
                authMessage.textContent = 'Welcome back, stargazer!';
                authActionBtn.textContent = 'Sign In';
                authFooter.innerHTML = `Don't have an account? <a href="#" id="toggle-auth">Sign up here</a><br>
                <a href="#" id="reset-password">Forgot password?</a>`;
            } else {
                authMessage.textContent = 'Join our cosmic community';
                authActionBtn.textContent = 'Create Account';
                authFooter.innerHTML = 'Already have an account? <a href="#" id="toggle-auth">Sign in here</a>';
            }
            
            // Reattach event listeners
            document.getElementById('toggle-auth').addEventListener('click', toggleAuthMode);
            document.getElementById('reset-password').addEventListener('click', handleResetPassword);
            authActionBtn.onclick = handleAuthAction;
        }
        
        // Toggle between login and signup modes
        function toggleAuthMode() {
            isLoginMode = !isLoginMode;
            emailError.style.display = 'none';
            passwordError.style.display = 'none';
            updateAuthUI();
        }
        
        // Handle auth action (login or signup)
        function handleAuthAction() {
            const email = authEmail.value;
            const password = authPassword.value;
            
            emailError.style.display = 'none';
            passwordError.style.display = 'none';
            
            if (isLoginMode) {
                // Login
                firebase.auth().signInWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        if (userCredential.user.emailVerified) {
                            // Store login state
                            localStorage.setItem('isLoggedIn', 'true');
                            localStorage.setItem('userEmail', userCredential.user.email);
                            showMainPage(userCredential.user);
                        } else {
                            alert("Please verify your email first. Check your inbox.");
                            userCredential.user.sendEmailVerification();
                            firebase.auth().signOut();
                        }
                    })
                    .catch((error) => {
                        handleAuthError(error);
                    });
            } else {
                // Signup
                firebase.auth().createUserWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        userCredential.user.sendEmailVerification();
                        alert("Account created! Please check your email for verification.");
                        toggleAuthMode();
                    })
                    .catch((error) => {
                        handleAuthError(error);
                    });
            }
        }
        
        // Handle password reset
        function handleResetPassword() {
            const email = authEmail.value || prompt("Enter your email:");
            if (email) {
                firebase.auth().sendPasswordResetEmail(email)
                    .then(() => alert("Password reset email sent!"))
                    .catch((error) => alert("Error: " + error.message));
            }
        }
        
        // Handle auth errors
        function handleAuthError(error) {
            if (error.code === 'auth/user-not-found' || error.code === 'auth/email-already-in-use') {
                emailError.textContent = isLoginMode ? 'User not found' : 'Email already in use';
                emailError.style.display = 'block';
            } else if (error.code === 'auth/wrong-password') {
                passwordError.textContent = 'Incorrect password';
                passwordError.style.display = 'block';
            } else if (error.code === 'auth/weak-password') {
                passwordError.textContent = 'Password should be at least 6 characters';
                passwordError.style.display = 'block';
            } else {
                alert("Error: " + error.message);
            }
        }
        
        // Logout function
        function logout() {
            firebase.auth().signOut().then(() => {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('userEmail');
                showMainPage(null);
            });
        }
        
        // Check if user was previously logged in
        document.addEventListener('DOMContentLoaded', function() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const userEmail = localStorage.getItem('userEmail');
            
            if (isLoggedIn === 'true' && userEmail) {
                // Try to silently sign in
                firebase.auth().signInWithEmailAndPassword(userEmail, prompt("Please enter your password:"))
                    .catch(() => {
                        localStorage.removeItem('isLoggedIn');
                        localStorage.removeItem('userEmail');
                    });
            }
            
            // Initialize auth UI
            updateAuthUI();
        });
    </script>
</body>
</html>
